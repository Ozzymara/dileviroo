{% extends 'base.html' %}

{% block title %}üìù Sign Up{% endblock title %}

{% block body %}
<!-- Load FontAwesome CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<section class="vh-100" style="background-color: #eee;">
  <div class="card text-black" style="border-radius: 25px;">
    <div class="card-body p-md-5">
      <div class="row justify-content-center">
        <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

          <h1 class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Sign Up</h1>
          {% for message in messages %}
            <div class="alert alert-primary alert-dismissable fade show" role="alert">
              <strong>{{ message }}</strong>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}

          <form class="mx-1 mx-md-4" action="/signup" method="POST">
            {% csrf_token %}

            <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="text" name="fname" id="form3Example1cfn" placeholder="Enter Your First Name" class="form-control">
                <label class="form-label" for="form3Example1cfn">First Name</label>
              </div>
            </div>

            <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="text" name="lname" id="form3Example1cln" placeholder="Enter Your Last Name" class="form-control">
                <label class="form-label" for="form3Example1cln">Last Name</label>
              </div>
            </div>

            <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
              <div class="form-outline flex-fill mb-0">
                <input type="text" name="number" id="form3Example3cn" placeholder="Enter Mobile Number" maxlength="11" class="form-control">
                <label class="form-label" for="form3Example3cn">Mobile Number</label>
              </div>
            </div>

            <!-- Password Field with eye icon toggle inside textbox -->
            <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
              <div class="form-outline flex-fill mb-0" style="position: relative;">
                <input type="password" name="password" id="password" placeholder="Enter Password"
                  class="form-control" minlength="8" autocomplete="new-password" style="padding-right: 40px;">
                <label class="form-label" for="password">Password</label>
                <button type="button" id="togglePassword"
                  style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
                         border: none; background: transparent; padding: 0; cursor: pointer;">
                  <i class="fas fa-eye"></i>
                </button>
                <div class="alert alert-warning alert-dismissable fade show mt-2" role="alert">
                  <strong>*Minimum length of password must be 8 characters</strong>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              </div>
            </div>

            <!-- Confirm Password Field with eye icon toggle inside textbox -->
            <div class="d-flex flex-row align-items-center mb-4">
              <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
              <div class="form-outline flex-fill mb-0" style="position: relative;">
                <input type="password" name="cpassword" id="cpassword" placeholder="Confirm Password"
                  class="form-control" minlength="8" autocomplete="new-password" style="padding-right: 40px;">
                <label class="form-label" for="cpassword">Confirm Password</label>
                <button type="button" id="toggleCPassword"
                  style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
                         border: none; background: transparent; padding: 0; cursor: pointer;">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>

            <div class="text-center text-lg-start mt-4 pt-2">
              <button type="submit" id="submit" class="btn btn-primary btn-lg"
                style="padding-left: 2.5rem; padding-right: 2.5rem;">
                Sign Up
              </button>
              <p class="small fw-bold mt-2 pt-1 mb-0">
                Already have an account! <a href="/login" class="link-danger">Login</a>
              </p>
            </div>

          </form>

        </div>
        <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">
          <img src="static/logo.png" class="img-fluid photo" alt="Deliveroo logo">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- JavaScript to toggle password visibility -->
<script>
  const togglePassword = document.querySelector('#togglePassword');
  const password = document.querySelector('#password');

  togglePassword.addEventListener('click', function () {
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);

    if (type === 'password') {
      this.firstElementChild.classList.remove('fa-eye-slash');
      this.firstElementChild.classList.add('fa-eye');
    } else {
      this.firstElementChild.classList.remove('fa-eye');
      this.firstElementChild.classList.add('fa-eye-slash');
    }
  });

  const toggleCPassword = document.querySelector('#toggleCPassword');
  const cpassword = document.querySelector('#cpassword');

  toggleCPassword.addEventListener('click', function () {
    const type = cpassword.getAttribute('type') === 'password' ? 'text' : 'password';
    cpassword.setAttribute('type', type);

    if (type === 'password') {
      this.firstElementChild.classList.remove('fa-eye-slash');
      this.firstElementChild.classList.add('fa-eye');
    } else {
      this.firstElementChild.classList.remove('fa-eye');
      this.firstElementChild.classList.add('fa-eye-slash');
    }
  });
</script>

{% endblock body %}
